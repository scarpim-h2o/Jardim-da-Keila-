<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jardim da Keila</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fontes Especiais -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <!-- √çcones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'title': ['"Great Vibes"', 'cursive'],
                        'body': ['"Quicksand"', 'sans-serif'],
                    },
                    colors: {
                        rose: {
                            50: '#fff1f2',
                            100: '#ffe4e6',
                            200: '#fecdd3',
                            300: '#fda4af',
                            400: '#fb7185',
                            500: '#f43f5e',
                            600: '#e11d48',
                            900: '#881337',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: linear-gradient(135deg, #fff1f2 0%, #ffe4e6 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .flower-bg {
            position: absolute;
            opacity: 0.15;
            z-index: -1;
            color: #e11d48;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.90);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 20px 50px rgba(244, 63, 94, 0.15);
        }

        .btn-romantic {
            background: linear-gradient(to right, #fb7185, #e11d48);
            transition: all 0.4s ease;
        }
        .btn-romantic:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(225, 29, 72, 0.3);
        }

        .btn-comfort {
            background: linear-gradient(to right, #f472b6, #db2777);
            transition: all 0.4s ease;
        }
        .btn-comfort:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(219, 39, 119, 0.3);
        }

        .typing-effect {
            animation: fadeIn 1.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4 relative font-body text-rose-900 min-h-screen">

    <!-- Decora√ß√£o de Fundo -->
    <i class="fas fa-heart flower-bg text-9xl top-10 left-10 animate-pulse-slow"></i>
    <i class="fas fa-spa flower-bg text-8xl bottom-20 right-10 animate-float" style="animation-delay: 1s;"></i>
    <i class="fas fa-star flower-bg text-9xl top-20 right-20 animate-float" style="animation-delay: 2s;"></i>

    <!-- Container Principal -->
    <main class="w-full max-w-md relative z-10 flex-grow flex flex-col justify-center">
        
        <div class="glass-panel rounded-[2.5rem] p-8 md:p-10 text-center relative overflow-hidden">
            
            <!-- Adorno no topo -->
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-rose-200 via-rose-400 to-rose-200"></div>

            <!-- T√≠tulo -->
            <div class="mb-6 relative">
                <div class="inline-block p-3 bg-rose-50 rounded-full mb-2 shadow-sm">
                    <i class="fas fa-crown text-rose-400 text-2xl"></i>
                </div>
                <h1 class="font-title text-6xl text-rose-600 drop-shadow-sm leading-tight pb-2">
                    Jardim da Keila
                </h1>
                <p class="text-rose-400 text-sm font-semibold tracking-wide">Um lugar especial rosa e branco</p>
            </div>

            <!-- √Årea do Poema -->
            <div id="poemContainer" class="min-h-[220px] flex items-center justify-center mb-6 relative bg-white/40 rounded-2xl p-4 border border-rose-100">
                
                <!-- Estado Inicial -->
                <div id="initialState" class="opacity-60 flex flex-col items-center gap-3">
                    <i class="fas fa-seedling text-5xl text-rose-300 animate-float"></i>
                    <p class="text-rose-400 text-sm italic">Escolha um bot√£o abaixo...</p>
                </div>

                <!-- Carregando -->
                <div id="loading" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm rounded-2xl z-20">
                    <i class="fas fa-heart fa-beat text-4xl text-rose-500 mb-3"></i>
                    <p class="text-rose-500 font-semibold animate-pulse">Escrevendo para Keila...</p>
                </div>

                <!-- Texto do Poema -->
                <div id="poemText" class="hidden text-xl md:text-2xl leading-relaxed font-title text-rose-800 typing-effect w-full z-10">
                    <!-- Poema entra aqui -->
                </div>
            </div>

            <!-- Bot√£o de Ouvir -->
            <button id="speakBtn" onclick="speakPoem()" class="hidden mb-6 mx-auto text-rose-500 hover:text-rose-700 hover:bg-rose-50 px-6 py-2 rounded-full transition-colors flex items-center gap-2 text-sm font-bold uppercase tracking-wide border border-rose-200">
                <i class="fas fa-volume-up"></i> Ouvir Poema
            </button>

            <!-- Bot√µes de A√ß√£o -->
            <div class="flex flex-col gap-3">
                
                <!-- Bot√£o 1: Poema Normal -->
                <button onclick="handlePoemRequest('normal')" class="btn-romantic w-full py-4 rounded-2xl text-white font-bold text-lg shadow-lg group relative overflow-hidden">
                    <span class="relative z-10 flex items-center justify-center gap-3">
                        <i class="fas fa-magic group-hover:rotate-12 transition-transform"></i>
                        Uma Flor para Keila
                    </span>
                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                </button>

                <!-- Bot√£o 2: Dia Ruim (Rom√¢ntico) -->
                <button onclick="handlePoemRequest('comfort')" class="btn-comfort w-full py-4 rounded-2xl text-white font-bold text-lg shadow-lg group relative overflow-hidden">
                    <span class="relative z-10 flex items-center justify-center gap-3">
                        <i class="fas fa-cloud-sun group-hover:scale-110 transition-transform"></i>
                        Dia Dif√≠cil? Clique aqui
                    </span>
                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                </button>

            </div>

        </div>
    </main>

    <!-- Rodap√© -->
    <footer class="mt-8 mb-4 text-rose-800/60 text-sm font-semibold tracking-widest uppercase relative z-10">
        Feito com amor para Keila üíñ
    </footer>

    <script>
        // === CONFIGURA√á√ÉO DA API ===
        const API_KEY = "AIzaSyCBJvLvRtMa9J5F-vyFAvedRdfNDFAzifE"; 

        // === BANCO DE DADOS DE POEMAS (BACKUP) ===
        // Usado se a API n√£o responder
        const fallbackPoems = {
            normal: [
                "Keila, como uma flor que desabrocha na manh√£,<br>Traz luz e cor onde quer que v√°,<br>Sua presen√ßa √© doce, um presente, um af√£,<br>Que faz a vida inteira se alegrar.",
                "Keila, teu nome soa como melodia,<br>Em tons de rosa pintando o dia,<br>Beleza rara, for√ßa e magia,<br>Voc√™ √© a pr√≥pria poesia.",
                "Keila √© raio de sol em dia de ver√£o,<br>Sorriso que aquece o cora√ß√£o,<br>Em cada passo, uma can√ß√£o,<br>Pura inspira√ß√£o.",
                "Keila, delicada como p√©tala de rosa,<br>Forte como a raiz que a sustenta,<br>Sua alma √© bela e preciosa,<br>Uma luz que a todos alenta."
            ],
            comfort: [
                "Keila, respire fundo, vai passar,<br>Voc√™ √© mais forte do que pode imaginar,<br>Mesmo em dias cinzas, saiba esperar,<br>O sol logo volta a brilhar.",
                "Keila, feche os olhos e sinta meu abra√ßo,<br>O dia dif√≠cil √© s√≥ um peda√ßo,<br>Voc√™ √© amada em cada tra√ßo,<br>Descanse agora, desfa√ßa o cansa√ßo.",
                "Keila, n√£o deixe o mundo tirar seu brilho,<br>Voc√™ trilha um lindo caminho,<br>Estou aqui, voc√™ n√£o est√° sozinha,<br>Com todo amor e carinho.",
                "Keila, dias ruins s√£o apenas nuvens,<br>Voc√™ √© o c√©u infinito e belo,<br>Lembre-se do seu valor singelo,<br>Tudo ficar√° bem, eu revelo."
            ]
        };

        let currentPoemText = "";

        // Fun√ß√£o auxiliar para pegar poema de backup aleat√≥rio
        function getBackupPoem(type) {
            const list = fallbackPoems[type];
            return list[Math.floor(Math.random() * list.length)];
        }

        // Fun√ß√£o Principal
        async function handlePoemRequest(type) {
            const loading = document.getElementById('loading');
            const poemDisplay = document.getElementById('poemText');
            const initialState = document.getElementById('initialState');
            const speakBtn = document.getElementById('speakBtn');

            // Preparar Interface
            initialState.classList.add('hidden');
            poemDisplay.classList.add('hidden');
            speakBtn.classList.add('hidden');
            loading.classList.remove('hidden');

            try {
                // 1. TENTATIVA COM A API DO GOOGLE
                const aiPoem = await fetchFromAI(type);
                displayPoem(aiPoem);
                console.log("Poema gerado pela IA com sucesso!");

            } catch (error) {
                // 2. SE A API FALHAR (Erro 401, Sem internet, etc)
                console.warn("API falhou, usando banco de poemas para garantir funcionamento:", error);
                
                // Pequeno delay para simular "pensamento" e n√£o ser instant√¢neo demais
                setTimeout(() => {
                    const backupPoem = getBackupPoem(type);
                    displayPoem(backupPoem);
                }, 1000);
            }
        }

        // Fun√ß√£o de conex√£o com a API
        async function fetchFromAI(type) {
            let prompt = "";
            if (type === 'normal') {
                prompt = `Escreva um poema curto (max 4 linhas) para uma mulher chamada Keila. Comece OBRIGATORIAMENTE com a palavra "Keila". Tema: Beleza, flores rosas e alegria.`;
            } else {
                prompt = `Escreva um poema curto (max 4 linhas) de conforto para uma mulher chamada Keila que teve um dia ruim. Comece OBRIGATORIAMENTE com a palavra "Keila". Tema: Vai ficar tudo bem, amor e carinho.`;
            }

            // Timeout de 4 segundos para n√£o travar
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 4000);

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),
                signal: controller.signal
            });

            clearTimeout(timeoutId);

            if (!response.ok) {
                throw new Error(`Erro na API: ${response.status}`);
            }
            
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);

            return data.candidates[0].content.parts[0].text.trim().replace(/\n/g, '<br>');
        }

        // Exibir na tela
        function displayPoem(htmlText) {
            const loading = document.getElementById('loading');
            const poemDisplay = document.getElementById('poemText');
            const speakBtn = document.getElementById('speakBtn');

            loading.classList.add('hidden');
            poemDisplay.innerHTML = htmlText;
            poemDisplay.classList.remove('hidden');
            speakBtn.classList.remove('hidden');
            
            // Limpa o texto para o leitor de voz (remove <br>)
            currentPoemText = htmlText.replace(/<br>/g, ' '); 
        }

        // Falar o poema
        function speakPoem() {
            if (!currentPoemText) return;

            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(currentPoemText);
            
            utterance.lang = 'pt-BR';
            utterance.rate = 0.9;
            utterance.pitch = 1.1;

            const voices = window.speechSynthesis.getVoices();
            const femaleVoice = voices.find(v => 
                v.lang.includes('pt') && (v.name.includes('Google') || v.name.includes('Luciana') || v.name.includes('Maria'))
            );
            
            if (femaleVoice) utterance.voice = femaleVoice;

            window.speechSynthesis.speak(utterance);
        }
    </script>
</body>
</html>


    
